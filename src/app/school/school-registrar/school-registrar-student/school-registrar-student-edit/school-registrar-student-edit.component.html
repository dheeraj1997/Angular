<div class="row">
  <div class="col-lg-12">
    <button class="btn pull-right card pointer"
    [routerLink]="['/school/admin/student/csv']">
    Upload CSV
  </button>
</div>
<div class="col-lg-12">
  <div class="card">
    <div class="card-header">
      Basic Information
    </div>
    <div class="card-block">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label>
              Aadhaar Id
              <span style="color: green">
                <small>recommended</small>
              </span>
            </label>
            <input
            type="text"
            class="form-control"
            [(ngModel)]="studentData.aadhaarId"
            (ngModelChange)="getStudentDetailsFromAadhaar($event)"
            placeholder="Enter Student's Aadhaar Id" required>
            <small class="form-text text-muted">
              <i style="color: green;">For auto-fetching student data. </i>
              Required to activate student module.
            </small>
          </div>
          <div class="form-group">
            <label>
              Student Name
              <span style="color: red">*</span>
            </label>
            <input
            type="text"
            class="form-control"
            [(ngModel)]="studentData.name"
            placeholder="Enter Student Name" required>
            <small class="form-text text-muted">
              Complete Name of the student.
            </small>
          </div>
          <div class="form-group">
            <label>
              Date of Birth
            </label>
            <div class="input-group">
              <input
              class="form-control"
              placeholder="yyyy-mm-dd"
              name="dob"
              [(ngModel)]="studentData.dob"
              (click)="dob.toggle()"
              ngbDatepicker #dob="ngbDatepicker" required>
              <button class="input-group-addon" (click)="dob.toggle()" type="button">
                <i class="fa fa-calendar"></i>
              </button>
            </div>
            <small class="form-text text-muted">
              Never miss your student's birthday
            </small>

          </div>
        </div>
        <div class="col-md-4">
          <div class="display-picture-box">
            <img class="display-picture" [src]="studentData.picture">
          </div>
          <div class="display-picture-box">
            <div class="btn-group" role="group" aria-label="Basic example">
              <input id="fileInput"
              type="file"
              accept="image/*"
              (change)="uploadProfilePicture($event)"
              style="display:none;"/>
              <button type="button"
              class="btn btn-success"
              onclick="document.getElementById('fileInput').click();">Upload
            </button>
            <button type="button"
            class="btn btn-danger"
            (click)="clearPicture()">Clear
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-12">
      <div class="form-group">
        <label>
          Gender
        </label>
        <select
        class="form-control"
        [(ngModel)]="studentData.gender">
        <option value="m">M</option>
        <option value="f">F</option>
        <option value="o">Other</option>
      </select>
      <small class="form-text text-muted">
        Select gender from dropdown.
      </small>
    </div>
    <div class="form-group">
      <label>
        Is Handicapped
      </label>
      <select class="form-control" [(ngModel)]="studentData.isHandicapped">
        <option value="false">No</option>
        <option value="true">Yes</option>
      </select>

      <small class="form-text text-muted">
        Select Yes in case of handicapped student.
      </small>
    </div>
    <div class="form-group">
      <label>
        Nationality
      </label>
      <select class="form-control"
      [(ngModel)]="studentData.nationality">
      <option value="indian">Indian</option>
      <option value="other">Other</option>
    </select>
  </div>
  <div class="form-group">
    <label>
      Religion
    </label>
    <select class="form-control" [(ngModel)]="studentData.religion">
      <option value="hindu">Hindu</option>
      <option value="muslim">Muslim</option>
      <option value="christian">Christian</option>
      <option value="sikh">Sikh</option>
      <option value="jain">Jain</option>
      <option value="buddhist">Buddhist</option>
      <option value="other">Other Religion</option>
    </select>
  </div>
  <div class="form-group">
    <label>
      Caste
    </label>
    <select class="form-control" [(ngModel)]="studentData.caste">
      <option value="sc">SC</option>
      <option value="st">ST</option>
      <option value="obc">OBC</option>
      <option value="general">General</option>
      <option value="other">Other</option>
      <option value="na">N/A</option>
    </select>
    <small class="form-text text-muted">
      Required for scholarship purpose
    </small>
  </div>
</div>
</div>
</div>
</div>
<div class="card">
  <div class="card-header">
    Parent's Information
  </div>
  <div class="card-block">
    <div class="form-group">
      <label>
        Mother's Name          
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.motherName"
      placeholder="Enter Mother's Name">
    </div>
    <div class="form-group">
      <label>
        Mother's occupation          
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.motherOccupation"
      placeholder="Enter Mother's Occupation">
    </div>
    <div class="form-group">
      <label>
        Father's Name

      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.fatherName"
      placeholder="Enter Father's Name">
    </div>
    <div class="form-group">
      <label>
        Father's occupation

      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.fatherOccupation"
      placeholder="Enter Father's Occupation">
    </div>
  </div>
</div>
<div class="card">
  <div class="card-header">
    Guardian Information
  </div>
  <div class="card-block">
    <div class="form-group">
      <label>
        Aadhaar Id
        <span style="color: green">
          <small>recommended</small>
        </span>
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.guardianInfo.aadhaarId"
      (ngModelChange)="getGuardianDetailsFromAadhaar($event)"
      placeholder="Enter Guardian's Aadhaar Id" required>
      <small class="form-text text-muted">
        Required to activate parents module.
      </small>
    </div>
    <div class="form-group">
      <label>
        Guardian Name
        <span style="color: red">*</span>
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.guardianInfo.name"
      placeholder="Enter Guardian Name">
    </div>
    <div class="form-group">
      <label>
        Relation
        <span style="color: red">*</span>
      </label>
      <select [(ngModel)]="studentData.guardianInfo.relation"
      class="form-control">
      <option value="mother">Mother</option>
      <option value="father">Father</option>
      <option value="other">Other</option>
    </select>
    <small class="form-text text-muted">
      Select relation from dropdown.
    </small>
  </div>
  <div class="form-group">
    <label>
      Contact No
      <span style="color: red">*</span>
    </label>
    <input
    type="text"
    class="form-control"
    [(ngModel)]="studentData.guardianInfo.contactNo"
    placeholder="Enter Guardian's Contact Number" required>
  </div>
  <div class="form-group">
    <label>
      Email Id
    </label>
    <input
    type="text"
    class="form-control"
    [(ngModel)]="studentData.guardianInfo.email"
    placeholder="Enter Guardian's Email Id" required>
  </div>
</div>
</div>
<div class="card">
  <div class="card-header">
    Address Information
  </div>
  <div class="card-block">
    <div class="form-group">
      <label>
        Pin Code
      </label>
      <input
      type="text"
      class="form-control"
      placeholder="Enter Pin Code"
      [(ngModel)]="studentData.address.pin"
      maxlength="6"
      (ngModelChange)="getDetailsFromPin($event)"
      required>
    </div>
    <div class="form-group">
      <label>
        Village/Locality
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.address.village"
      placeholder="Enter Village/Locality" required>
    </div>
    <div class="form-group">
      <label>
        Block
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.address.block"
      placeholder="Enter Block">
    </div>
    <div class="form-group">
      <label>
        District
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.address.district"
      placeholder="Enter District">
    </div>
    <div class="form-group">
      <label>
        State
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.address.state"
      placeholder="Enter State">
    </div>
    <div class="form-group">
      <label>
        Complete Address
      </label>
      <textarea
      class="form-control"
      [(ngModel)]="studentData.address.completeAddress"
      rows="3">Complete Address</textarea>
    </div>
  </div>
</div>
<div class="card">
  <div class="card-header">
    Admission Information
  </div>
  <div class="card-block">
    <div class="form-group">
      <label>
        Admission No
        <span style="color: red">*</span>
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.schoolDetail.admissionNumber"
      placeholder="Enter Student Admission No" required>
      <small class="form-text text-muted">
        Admission no of student.
      </small>
    </div>
    <div class="form-group">
      <label>
        Roll No
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.schoolDetail.rollNo"
      placeholder="Enter Student Roll No">
      <small class="form-text text-muted">
        Roll no of student.
      </small>
    </div>
    <div class="form-group">
      <label>
        SRN No
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.schoolDetail.srnNo"
      placeholder="Enter Student SRN No">
      <small class="form-text text-muted">
        SRN no of student.
      </small>
    </div>
    <div class="form-group">
      <label>
        Session
        <span style="color: red">*</span>
      </label>
      <select class="form-control"
      [(ngModel)]="studentData.schoolDetail.sessionId"
      (change)="feeOnChange()">
      <option value="{{session._id.toString()}}"
      *ngFor="let session of sessionData;">
      {{session.name}}
    </option>
  </select>
</div>
<div class="form-group">
  <label>
    Class
    <span style="color: red">*</span>
  </label>
  <select class="form-control"
  [(ngModel)]="studentData.schoolDetail.classId"
  (change)="feeOnChange()">
  <option value="{{class._id.toString()}}"
  *ngFor="let class of classData;">
  {{class.name}}
</option>
</select>
</div>
<div class="form-group">
  <label>
    Admission Date
  </label>
  <div class="input-group">
    <input
    class="form-control"
    placeholder="yyyy-mm-dd"
    name="ad"
    [(ngModel)]="studentData.schoolDetail.admissionDate"
    (click)="ad.toggle()"
    ngbDatepicker #ad="ngbDatepicker" required>
    <button class="input-group-addon" (click)="ad.toggle()" type="button">
      <i class="fa fa-calendar"></i>
    </button>
  </div>
</div>
<div class="form-group">
  <label>
    Admission Type
    <span style="color: red">*</span>
  </label>
  <select class="form-control"
  [(ngModel)]="studentData.schoolDetail.admissionType">
  <option value="paid">Paid</option>
  <option value="free">Free</option>
</select>
</div>
<!--<div class="form-group" *ngIf="studentData.schoolDetail.admissionType === 'paid'">-->
  <!--<label>-->
    <!--Discount %-->
    <!--<span style="color: red">*</span>-->
    <!--</label>-->
    <!--<input-->
    <!--type="text"-->
    <!--class="form-control"-->
    <!--[(ngModel)]="studentData.schoolDetail.admissionDiscount"-->
    <!--placeholder="Enter Discount percentage(if any)">-->
    <!--<small class="form-text text-muted">-->
      <!--Required for fee calculation-->
      <!--</small>-->
      <!--</div>-->
    </div>
  </div>
  <div class="card" *ngIf="studentData.schoolDetail.admissionType === 'paid'">
    <div class="card-header">
      Fees Information
    </div>
    <div class="card-block">
      <div *ngFor="let feeRow of studentData.feesData;let k = index;"
      class="row"
      style="border: solid 6px #f3f3f3;">
      <div class="form-group col-md-5">
        <label>
          Particulars
          <span style="color: red">*</span>
        </label>
        <input
        class="form-control"
        type="text"
        disabled
        [(ngModel)]="feeRow.feeData.particular">
        <small class="form-text text-muted">
          Enter particular details.
        </small>
      </div>
      <div class="form-group col-md-2">
        <label>
          Amount
          <span style="color: red">*</span>
        </label>
        <input
        class="form-control"
        type="number"
        [(ngModel)]="feeRow.feeData.amount">
        <small class="form-text text-muted">
          Enter amount.
        </small>
      </div>
      <div class="form-group col-md-3">
        <label>
          Type
          <span style="color: red">*</span>
        </label>
        <input
        class="form-control"
        type="text"
        disabled
        [(ngModel)]="feeRow.feeData.type">
      </div>
      <div class="form-group col-md-2"
      *ngIf="feeRow.feeData.type !== 'admission'">
      <label>
        Due Date
        <span style="color: red">*</span>
      </label>
      <input
      class="form-control"
      type="number"
      min="1"
      max="31"
      [(ngModel)]="feeRow.feeData.dueDate">
      <small class="form-text text-muted">
        Enter Due Date.
      </small>
    </div>
    <div class="form-group col-md-12"
    *ngIf="feeRow.feeData.type === 'monthly'">
    <div>
      <span *ngFor="let month of feeRow.feeData.months;"
      [ngClass]="{'btn-success':month.selected, 'btn-danger':!month.selected}"
      style="margin-right: 5px; margin-bottom: 5px;">
      {{month.name | uppercase}}
    </span>
  </div>
</div>
</div>
</div>
</div>
<div class="card">
  <div class="card-header">
    Medical Information
  </div>
  <div class="card-block">
    <div class="form-group">
      <label>
        Height (in CMs)
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.height"
      placeholder="Enter Student's Height">
    </div>
    <div class="form-group">
      <label>
        Weight (in Kgs)
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.weight"
      placeholder="Enter Student's Weight">
    </div>
    <div class="form-group">
      <label>
        Blood Group
        <span style="color: green">
          <small>recommended</small>
        </span>
      </label>
      <input
      type="text"
      class="form-control"
      [(ngModel)]="studentData.bloodGroup"
      placeholder="Enter Student's Blood Group">
      <small>Required for medical emergency.</small>
    </div>
  </div>
</div>
<div class="card">
  <div class="card-header">
    <span style="color: red"> * </span> &nbsp;&nbsp;
    Required Fields
  </div>
  <div class="card-block">
    <button
    type="submit"
    class="btn btn-primary"
    (click)="submitStudent()">Submit
  </button>
</div>
</div>
</div>
</div>
