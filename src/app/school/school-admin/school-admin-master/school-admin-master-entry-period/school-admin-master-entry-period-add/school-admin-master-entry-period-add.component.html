<div style="background-color: #f5f5f5">
  <div class="row">
    <div class="col-md-12">
      <button class="btn pull-right card pointer"
              [routerLink]="['/school/admin/master/period/view']">
        View Periods
      </button>
    </div>
    <div class="col-lg-12">
      <div class="card">
        <div class="card-block">
          <div class="col-md-12">
            <div class="form-group">
              <label>
                <b>Select Session</b>
              </label>
              <select class="form-control" [(ngModel)]="selectedSession">
                <option
                  value="{{sess._id}}"
                  *ngFor="let sess of sessionData;">
                  {{sess.name}}
                  ({{sess.startDate.year}}/{{sess.startDate.month}}/{{sess.startDate.day}}
                  to {{sess.endDate.year}}/{{sess.endDate.month}}/{{sess.endDate.day}})
                </option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12">
      <div class="card" *ngFor="let per of allPeriods; let perInd = index;">
        <div class="card-block">
          <div class="form-group">
            <label
              class="custom-control custom-checkbox"
              *ngFor="let cls of per.classData; let clsInd = index;">
              <input
                type="checkbox"
                [(ngModel)]="cls.isSelected"
                (ngModelChange)="checkClassAvailability($event , cls._id , perInd)"
                class="custom-control-input">
              <span class="custom-control-indicator"></span>
              <span class="custom-control-description">{{cls.name}}</span>
            </label>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label>
                Total Periods
                <span style="color: red">*</span>
              </label>
              <input
                type="number"
                [(ngModel)]="per.totalPeriods"
                (ngModelChange)="addPeriodList($event , per)"
                class="form-control">
            </div>
          </div>
          <div class="row period-gap" *ngFor="let perData of per.list;">
            <div class="form-group col-md-4">
              <label>
                Period
              </label>
              <input
                type="number"
                class="form-control input-gap"
                [(ngModel)]="perData.number"
                disabled>
            </div>
            <div class="form-group col-md-4">
              <label>
                Start Time
              </label>
              <ngb-timepicker
                [(ngModel)]="perData.startTime"
                [meridian]="true">
              </ngb-timepicker>

            </div>
            <div class="form-group col-md-4">
              <label>
                End Time
              </label>
              <ngb-timepicker
                [(ngModel)]="perData.endTime"
                [meridian]="true">
              </ngb-timepicker>

            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <span style="color: red"> * </span> &nbsp;&nbsp;
          Required Fields
        </div>
        <div class="card-block">

          <button
            type="submit"
            (click)="save()"
            [disabled]="isDisable===true"
            class="btn btn-primary pull-right">Submit
          </button>

          <button
            type="button"
            class="btn btn-success"
            *ngIf="periodRow.classData.length"
            (click)="addPeriod()">Add New Row
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


